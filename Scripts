from langchain_openai import ChatOpenAI
from orchestrator.langgraph_supervisor import build_workflow


def chat():
    model = ChatOpenAI(model="gpt-4o")
    app = build_workflow(model).compile()

    messages = []

    while True:
        user_input = input("> ")
        if user_input.lower() in {"exit", "quit"}:
            break

        messages.append({"role": "user", "content": user_input})

        result = app.invoke({"messages": messages})

        messages = result["messages"]
        messages[-1].pretty_print()


if __name__ == "__main__":
    chat()
